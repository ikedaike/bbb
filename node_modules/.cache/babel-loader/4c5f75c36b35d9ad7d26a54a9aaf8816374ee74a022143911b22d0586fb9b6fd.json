{"ast":null,"code":"import Vue from \"vue\";\nimport Vuex from \"vuex\";\n// カスタムしたaxiosをインポート\nimport axios from '../axiou-auth';\n\n// Vuexをこのプロジェクト全体で使用する宣言\nVue.use(Vuex);\n\n// vuex.storeインスタンスを生成したものを外で使用できるようにし、main.jsで呼ぶ\nexport default new Vuex.Store({\n  // stateでは全てのファイルで使用できるグローバル変数を定義できる\n  // ただし、グローバル変数はどこでも使用できてしまうため、いろんな箇所で値を変更するとバグが生まれやすい\n  // そこで値変更の際はmutationsを使う\n  state: {\n    idToken: null\n  },\n  // storeから値を取得する時に使用する(gettersを使用しなくてもできるが、使った方がわかりやすい)\n  getters: {\n    idToken: state => state.idToken\n  },\n  // stateの値をいじる時は必ずmutationsの中でいじるようにする(値の追跡がしやすい)\n  // mutationsで定義した関数は外で使用可能で、外で呼ぶ時は→this.$store.commit(upDateIdtoken, 2) \n  // 補足として、mutationsは同期処理しか書けない(非同期まで書けてしまうとコードが読みにくくなるため)\n  // 非同期を使用する場合は、actionsを使用する\n  mutations: {\n    upDateIdtoken(state, idToken) {\n      state.idToken = idToken;\n    }\n  },\n  actions: {\n    // thenではなくasync/awaitを使用\n    // 参考 https://qiita.com/shisama/items/61cdcc09dc69fd8d3127\n    // {commit}はcontextの中で使用したいものだけを記載するやり方(contextと記載するのではなくオブジェクトとしてcommitを記載できる)\n    // この関数では、メアド、パスワードからidトークン値を呼び出して、mutationにコミットする\n    async login({\n      commit\n    }, authData) {\n      // firebaseの認証機構を使用している(事前にユーザを登録しておいた)\n      try {\n        // postの第二引数の値は以下公式ドキュメントを参考\n        // https://firebase.google.com/docs/reference/rest/auth\n        const response = await axios.post('/accounts:signInWithPassword?key=AIzaSyDgzqZut4dul-eVpjWdNSCeBntGScPVlnM', {\n          email: authData.email,\n          password: authData.password,\n          returnSecureToken: true\n        });\n        // デバッグ表示\n        console.log(response);\n        // レスポンスのidトークン値をmutationsにコミットする\n        commit(\"upDateIdtoken\", response.data.idToken);\n      }\n      // リクエスト失敗した際のエラーをキャッチ\n      catch (error) {\n        // デバッグ表示\n        console.log(error);\n      }\n    }\n  }\n});","map":{"version":3,"names":["Vue","Vuex","axios","use","Store","state","idToken","getters","mutations","upDateIdtoken","actions","login","commit","authData","response","post","email","password","returnSecureToken","console","log","data","error"],"sources":["/Users/ikeda/Desktop/vue課題/stamp-app/src/store/index.js"],"sourcesContent":["import Vue from \"vue\"\nimport Vuex from \"vuex\"\n// カスタムしたaxiosをインポート\nimport axios from '../axiou-auth'\n\n// Vuexをこのプロジェクト全体で使用する宣言\nVue.use(Vuex)\n\n// vuex.storeインスタンスを生成したものを外で使用できるようにし、main.jsで呼ぶ\nexport default new Vuex.Store({\n    // stateでは全てのファイルで使用できるグローバル変数を定義できる\n    // ただし、グローバル変数はどこでも使用できてしまうため、いろんな箇所で値を変更するとバグが生まれやすい\n    // そこで値変更の際はmutationsを使う\n    state: {\n        idToken: null\n    },\n    // storeから値を取得する時に使用する(gettersを使用しなくてもできるが、使った方がわかりやすい)\n    getters: {\n        idToken: state => state.idToken\n    },\n    // stateの値をいじる時は必ずmutationsの中でいじるようにする(値の追跡がしやすい)\n    // mutationsで定義した関数は外で使用可能で、外で呼ぶ時は→this.$store.commit(upDateIdtoken, 2) \n    // 補足として、mutationsは同期処理しか書けない(非同期まで書けてしまうとコードが読みにくくなるため)\n    // 非同期を使用する場合は、actionsを使用する\n    mutations: {\n        upDateIdtoken(state, idToken){\n            state.idToken = idToken\n        }\n    },\n    actions: {\n    // thenではなくasync/awaitを使用\n    // 参考 https://qiita.com/shisama/items/61cdcc09dc69fd8d3127\n    // {commit}はcontextの中で使用したいものだけを記載するやり方(contextと記載するのではなくオブジェクトとしてcommitを記載できる)\n    // この関数では、メアド、パスワードからidトークン値を呼び出して、mutationにコミットする\n    async login({commit}, authData){\n        // firebaseの認証機構を使用している(事前にユーザを登録しておいた)\n        try{\n          // postの第二引数の値は以下公式ドキュメントを参考\n          // https://firebase.google.com/docs/reference/rest/auth\n          const response = await axios.post('/accounts:signInWithPassword?key=AIzaSyDgzqZut4dul-eVpjWdNSCeBntGScPVlnM',\n        {\n         email: authData.email,\n         password: authData.password,\n         returnSecureToken: true\n        })\n        // デバッグ表示\n        console.log(response)\n        // レスポンスのidトークン値をmutationsにコミットする\n        commit(\"upDateIdtoken\", response.data.idToken)\n    }\n    // リクエスト失敗した際のエラーをキャッチ\n    catch(error){\n        // デバッグ表示\n          console.log(error)\n        }\n    }\n    }\n})\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,IAAI,MAAM,MAAM;AACvB;AACA,OAAOC,KAAK,MAAM,eAAe;;AAEjC;AACAF,GAAG,CAACG,GAAG,CAACF,IAAI,CAAC;;AAEb;AACA,eAAe,IAAIA,IAAI,CAACG,KAAK,CAAC;EAC1B;EACA;EACA;EACAC,KAAK,EAAE;IACHC,OAAO,EAAE;EACb,CAAC;EACD;EACAC,OAAO,EAAE;IACLD,OAAO,EAAED,KAAK,IAAIA,KAAK,CAACC;EAC5B,CAAC;EACD;EACA;EACA;EACA;EACAE,SAAS,EAAE;IACPC,aAAa,CAACJ,KAAK,EAAEC,OAAO,EAAC;MACzBD,KAAK,CAACC,OAAO,GAAGA,OAAO;IAC3B;EACJ,CAAC;EACDI,OAAO,EAAE;IACT;IACA;IACA;IACA;IACA,MAAMC,KAAK,CAAC;MAACC;IAAM,CAAC,EAAEC,QAAQ,EAAC;MAC3B;MACA,IAAG;QACD;QACA;QACA,MAAMC,QAAQ,GAAG,MAAMZ,KAAK,CAACa,IAAI,CAAC,0EAA0E,EAC9G;UACCC,KAAK,EAAEH,QAAQ,CAACG,KAAK;UACrBC,QAAQ,EAAEJ,QAAQ,CAACI,QAAQ;UAC3BC,iBAAiB,EAAE;QACpB,CAAC,CAAC;QACF;QACAC,OAAO,CAACC,GAAG,CAACN,QAAQ,CAAC;QACrB;QACAF,MAAM,CAAC,eAAe,EAAEE,QAAQ,CAACO,IAAI,CAACf,OAAO,CAAC;MAClD;MACA;MACA,OAAMgB,KAAK,EAAC;QACR;QACEH,OAAO,CAACC,GAAG,CAACE,KAAK,CAAC;MACpB;IACJ;EACA;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}